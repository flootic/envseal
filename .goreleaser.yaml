version: 2

project_name: envseal

before:
  hooks:
  - go mod download

builds:
- id: envseal
  main: ./cmd/cli
  binary: envseal
  env:
  - CGO_ENABLED=0
  flags:
  - -trimpath
  goos: [ linux, darwin, windows ]
  goarch: [ amd64, arm64 ]
  ldflags:
  - -s -w
  - -X main.version={{ .Version }}
  - -X main.commit={{ .Commit }}
  - -X main.date={{ .Date }}

archives:
- name_template: '{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}'
  formats: [ "tar.gz" ]
  format_overrides:
  - goos: windows
    formats: [ "zip" ]

checksum:
  name_template: checksums.txt

sboms:
- id: default

changelog:
  sort: asc
  filters:
    exclude:
    - "^docs:"
    - "^test:"
    - "^chore:"
    - "^ci:"
